(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],l=0,h=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var p=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={id:"swisstopo-poi-picker"};function a(t,e,n,a,i,s){var c=Object(r["j"])("Map");return Object(r["h"])(),Object(r["d"])("div",o,[Object(r["f"])(c,{ref:"map"},null,512)])}var i={class:"poi-picker"},s={class:"poi-picker-search"},c={key:0,class:"poi-picker-results"},u=["innerHTML","onClick"],p={class:"map-container"},l={ref:"map",class:"map"},h={class:"layer-switcher btn-group btn-group-sm"},f=Object(r["e"])("div",{class:"credits small"},"Â©swisstopo",-1),d=["name"];function m(t,e,n,o,a,m){return Object(r["h"])(),Object(r["d"])("div",i,[Object(r["e"])("div",s,[Object(r["l"])(Object(r["e"])("input",{type:"text",class:"form-control poi-picker-search",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.q=e}),onKeyup:e[1]||(e[1]=function(){return m.searchOnInput&&m.searchOnInput.apply(m,arguments)})},null,544),[[r["k"],t.q]]),t.showResults?(Object(r["h"])(),Object(r["d"])("div",c,[(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["i"])(t.results,(function(t){return Object(r["h"])(),Object(r["d"])("div",{class:"result",key:t.id,innerHTML:t.attrs.label,onClick:function(e){return m.selectLocation(t.attrs.y,t.attrs.x)}},null,8,u)})),128))])):Object(r["c"])("",!0)]),Object(r["e"])("div",p,[Object(r["e"])("div",l,null,512),Object(r["e"])("div",h,[Object(r["e"])("button",{type:"button",class:Object(r["g"])(["btn",m.getButtonClass("topo")]),onClick:e[2]||(e[2]=Object(r["m"])((function(t){return m.switchLayer("topo")}),["prevent"]))},"Topo",2),Object(r["e"])("button",{type:"button",class:Object(r["g"])(["btn",m.getButtonClass("ortho")]),onClick:e[3]||(e[3]=Object(r["m"])((function(t){return m.switchLayer("ortho")}),["prevent"]))},"Ortho",2)]),f]),Object(r["l"])(Object(r["e"])("input",{id:"poi-coordinates","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.coordinates=e}),class:"form-control",name:t.inputName},null,8,d),[[r["k"],t.coordinates]])])}n("d81d"),n("ac1f"),n("466d"),n("a9e3"),n("1276");var b=n("bc3a"),v=n.n(b),w=(n("5bc0"),n("5eee")),y=n("f5dd"),O=n("480c"),g=n("3e6b"),j=n("f2f0"),k=n("a2c7"),M=n("256f"),P=n("4cdf"),I=n("f403"),S=n("6c77"),x=n("6cbf"),L=n("5831"),T=new y["a"]({code:"EPSG:21781",extent:[485869.5728,76443.1884,837076.5648,299941.7864],units:"m"});Object(M["c"])(T);var C=new L["a"],E={props:{},data:function(){return{map:!1,markerPath:"/img/marker.svg",coordinates:null,active:"topo",q:null,showResults:!1,results:null,inputName:null,layers:{topo:null,ortho:null,poi:null}}},methods:{setFeature:function(t){this.setPoi(t.coordinate)},setPoi:function(t){C.clear();var e=new P["a"]({geometry:new I["a"](t),name:"POI"});C.addFeature(e),this.coordinates=t},switchLayer:function(t){"ortho"==t?(this.layers.topo.setOpacity(0),this.layers.ortho.setOpacity(1),this.active="ortho"):(this.layers.topo.setOpacity(1),this.layers.ortho.setOpacity(0),this.active="topo")},getButtonClass:function(t){return t==this.active?"btn-primary":"btn-light"},searchOnInput:function(){this.results=null,this.showResults=!1,this.q.length>2&&this.searchLocation()},searchLocation:function(){var t=this;v.a.get("https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&origins=gazetteer&searchText="+this.q).then((function(e){t.results=e.data.results,t.showResults=!0}))},selectLocation:function(t,e){this.map.getView().setCenter([t,e]),this.map.getView().setZoom(7),this.showResults=!1},setMarkerPath:function(){var t=document.getElementById("poi-picker-marker-path");null!==t&&(this.markerPath=t.innerHTML)},setInputName:function(){var t=document.getElementById("poi-picker-input-name");null!==t&&(this.inputName=t.innerHTML)},setInitialPoi:function(){var t=document.getElementById("poi-picker-coordinates");if(null!==t){var e=t.innerHTML;if(e){var n=e.match(/\d+(?:\.\d+)?/g).map(Number);this.setPoi(n),this.map.getView().setCenter(n),this.map.getView().setZoom(7)}}}},mounted:function(){this.setMarkerPath(),this.setInputName(),this.map=new w["a"]({target:this.$refs["map"],layers:[this.layers.ortho=new O["a"]({id:"ortho-layer",opacity:0,source:new j["a"]({url:"https://wms.geo.admin.ch/",params:{LAYERS:"ch.swisstopo.swissimage",FORMAT:"image/jpeg"},serverType:"mapserver"})}),this.layers.topo=new O["a"]({id:"topo-layer",opacity:1,source:new j["a"]({url:"https://wms.geo.admin.ch/",params:{LAYERS:"ch.swisstopo.pixelkarte-farbe",FORMAT:"image/jpeg"},serverType:"mapserver"})}),this.layers.poi=new g["a"]({id:"poi-layer",opacity:1,source:C,style:new S["b"]({image:new x["a"]({anchor:[20,58],anchorXUnits:"pixels",anchorYUnits:"pixels",src:this.markerPath})})})],view:new k["a"]({projection:T,center:Object(M["o"])([8.4,46.4],"EPSG:4326","EPSG:21781"),zoom:3,minZoom:3,maxZoom:12})}),this.setInitialPoi(),this.map.on("click",this.setFeature)}};function R(t,e){t=_(t),e=_(e),t=q(t),e=q(e);var n=(t-169028.66)/1e4,r=(e-26782.5)/1e4,o=600072.37+211455.93*r-10938.51*r*n-.36*r*Math.pow(n,2)-44.54*Math.pow(r,3);return o}function N(t,e){t=_(t),e=_(e),t=q(t),e=q(e);var n=(t-169028.66)/1e4,r=(e-26782.5)/1e4,o=200147.07+308807.95*n+3745.25*Math.pow(r,2)+76.63*Math.pow(n,2)-194.56*Math.pow(r,2)*n+119.79*Math.pow(n,3);return o}function B(t,e){var n=(t-6e5)/1e6,r=(e-2e5)/1e6,o=16.9023892+3.238272*r-.270978*Math.pow(n,2)-.002528*Math.pow(r,2)-.0447*Math.pow(n,2)*r-.014*Math.pow(r,3);return o=100*o/36,o}function V(t,e){var n=(t-6e5)/1e6,r=(e-2e5)/1e6,o=2.6779094+4.728982*n+.791484*n*r+.1306*n*Math.pow(r,2)-.0436*Math.pow(n,3);return o=100*o/36,o}function _(t){var e=parseInt(t,10),n=parseInt(60*(t-e),10),r=60*(60*(t-e)-n);return e+n/100+r/1e4}function q(t){var e=parseInt(t,10),n=parseInt(100*(t-e),10),r=100*(100*(t-e)-n),o=String(t).split(".");return 2==o.length&&2==o[1].length&&(n=Number(o[1]),r=0),r+60*n+3600*e}Object(M["b"])("EPSG:4326",T,(function(t){return[R(t[1],t[0]),N(t[1],t[0])]}),(function(t){return[V(t[0],t[1]),B(t[0],t[1])]})),E.render=m;var A=E,F={name:"Date Picker App",components:{Map:A}};F.render=a;var H=F;n("9607");Object(r["b"])(H).mount("#swisstopo-poi-picker")},9607:function(t,e,n){}});
//# sourceMappingURL=app.js.map